{"version":3,"sources":["UpltvHelper.js"],"names":["upltv","require","cc","bridgeInterface","UpltvHelper","Class","statics","initUpltv","cb","iosZone","initSdk","UPLTV_ANDROID_APPKEY","UPLTV_IOS_APPKEY","r","log","setloadRdADCb","setRewardVideoLoadCallback","cpid","msg","loadAndroidAdsByManual","rdADIsReady","isRewardReady","toString","rdAdShow","rewardPlaceId","setRewardVideoShowCallback","type","event","AdEventType","VIDEO_EVENT_DID_SHOW","VIDEO_EVENT_DID_CLICK","VIDEO_EVENT_DID_CLOSE","zy","AdHelper","resumeGame","VIDEO_EVENT_DID_GIVEN_REWARD","httpProxy","watchAds","onOpenAdsReward","VIDEO_EVENT_DID_ABANDON_REWARD","showRewardVideo","showRewardDebugUI","setInterstitialLoadCallback","placeId","suc","fail","isInterstitialReady","ret","showInterstitial","setInterstitialShowCallback","showInterstitialAd","showInterstitialDebugUI"],"mappings":"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","file":"UpltvHelper.js","sourceRoot":"../../../../../../assets/scripts/framework/platform","sourcesContent":["/**\n * Created by skyxu on 2019/11/21.\n */\n\nvar upltv = require(\"UPLTV\").upltv;\ncc.bridgeInterface = require(\"UPLTV\").bridgeInterface;\n\nlet UpltvHelper = cc.Class({\n    statics: {\n        initUpltv(cb) {\n            // UPLTV 为 iOS 应用定义的发行地区(0，海外；1，中国大陆；2，根据 IP 自动定位区域), 无 iOS 应用时须填入0\n            let iosZone = 2;\n            upltv.initSdk(UPLTV_ANDROID_APPKEY, UPLTV_IOS_APPKEY, iosZone, function (r) {\n                cc.log(\"===> js upltv intSdk result:, %s\", r);\n                if (cb) {\n                    cb(r);\n                }\n                // 自动测试\n                // upltv.autoOneKeyInspect();\n            });\n        },\n\n        setloadRdADCb() {\n            upltv.setRewardVideoLoadCallback(function(cpid, msg){\n                cc.log(\"===> js RewardVideo LoadCallback Success at: %s\", cpid);\n            }, function(cpid, msg){\n                cc.log(\"===> js RewardVideo LoadCallback Fail at: %s\", cpid);\n            });\n        },\n\n        // 手动加载广告\n        loadAndroidAdsByManual() {\n            cc.bridgeInterface.loadAndroidAdsByManual();\n        },\n\n        rdADIsReady() {\n            let r = upltv.isRewardReady();\n            cc.log(\"===> js isRewardReady r: %s\", r.toString());\n            return r;\n        },\n\n        /**\n         *\n         * @param rewardPlaceId{String} 广告位id\n         * @brief video_reward_1 体力\n         * @brief video_reward_2 离线奖励翻倍\n         * @brief video_reward_3 协同攻击\n         * @brief video_reward_4 复活\n         * @brief video_reward_5 关卡奖励翻倍\n         * @brief video_reward_6 体验满星炮塔\n         */\n        rdAdShow(rewardPlaceId) {\n            upltv.setRewardVideoShowCallback(function(type, cpid){\n                let event = \"unkown\";\n                if (type == upltv.AdEventType.VIDEO_EVENT_DID_SHOW) {\n                    event = \"Did_Show\";\n                } else if (type == upltv.AdEventType.VIDEO_EVENT_DID_CLICK) {\n                    event = \"Did_Click\";\n                } else if (type == upltv.AdEventType.VIDEO_EVENT_DID_CLOSE) {\n                    event = \"Did_Close\";\n                    zy.AdHelper.resumeGame();\n                } else if (type == upltv.AdEventType.VIDEO_EVENT_DID_GIVEN_REWARD) {\n                    event = \"Did_Given_Reward\";\n\n                    zy.httpProxy.watchAds(rewardPlaceId);\n                    zy.AdHelper.onOpenAdsReward(rewardPlaceId, true);\n                } else if (type == upltv.AdEventType.VIDEO_EVENT_DID_ABANDON_REWARD) {\n                    event = \"Did_Abandon_Reward\";\n                    zy.AdHelper.onOpenAdsReward(rewardPlaceId, false);\n                }\n                cc.log(\"===> js RewardVideo Show Callback, event: %s, at: %s\", event, cpid);\n            });\n\n            let r = upltv.isRewardReady();\n            cc.log(\"===> js isRewardReady r: %s\", r);\n            if (r == true) {\n                cc.log(\"===> js showRewardVideo call\");\n                upltv.showRewardVideo(rewardPlaceId);\n            }\n        },\n\n        showRewardDebugUI() {\n            upltv.showRewardDebugUI();\n        },\n\n        //-----------------插屏广告---------------\n        setInterstitialLoadCallback(placeId, suc, fail) {\n            upltv.setInterstitialLoadCallback(placeId, suc, fail);\n        },\n\n        isInterstitialReady(placeId) {\n            let ret = upltv.isInterstitialReady(placeId);\n            cc.log(\"===> js isInterstitialReady ret: %s\", ret.toString());\n            return ret;\n        },\n\n        /**\n         *\n         * @param placeId{String}广告位id interstitial_1 ...\n         * @param cb\n         */\n        showInterstitial(placeId, cb) {\n            upltv.setInterstitialShowCallback(placeId, cb);\n            upltv.showInterstitialAd(placeId);\n        },\n        // 插屏广告测试页面\n        showInterstitialDebugUI() {\n            upltv.showInterstitialDebugUI();\n        }\n\n    }\n});\n\nzy.UpltvHelper = UpltvHelper;"]}