{"version":3,"sources":["Tip.js"],"names":["cc","Class","extends","Component","properties","tipLabel","Label","tipBg","Node","statics","tipNode","show","text","loader","loadRes","Prefab","err","prefab","isValid","destroy","instantiate","zIndex","zy","constData","ZIndex","TIP","parent","director","getUiRoot","getComponent","init","bind","onLoad","originalWidth","width","originalHeight","height","opacity","string","node","y","seq","sequence","spawn","moveBy","v2","fadeIn","delayTime","fadeOut","callFunc","runAction"],"mappings":";;;;;;AAAA;;;;AAIAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,gBAAY;AACRC,kBAAUL,GAAGM,KADL;AAERC,eAAOP,GAAGQ;AAFF,KAFP;;AAOLC,aAAS;AACLC,iBAAS,IADJ;;AAGL;AACAC,YAJK,gBAICC,IAJD,EAIO;AACRZ,eAAGa,MAAH,CAAUC,OAAV,CAAkB,oBAAlB,EAAwCd,GAAGe,MAA3C,EAAmD,UAAUC,GAAV,EAAeC,MAAf,EAAuB;AACtE,oBAAI,CAACD,GAAL,EAAU;AACN,wBAAIhB,GAAGkB,OAAH,CAAW,KAAKR,OAAhB,CAAJ,EAA8B;AAC1B,6BAAKA,OAAL,CAAaS,OAAb;AACH;AACD,yBAAKT,OAAL,GAAeV,GAAGoB,WAAH,CAAeH,MAAf,CAAf;AACA,yBAAKP,OAAL,CAAaW,MAAb,GAAsBC,GAAGC,SAAH,CAAaC,MAAb,CAAoBC,GAA1C;AACA,yBAAKf,OAAL,CAAagB,MAAb,GAAsBJ,GAAGK,QAAH,CAAYC,SAAZ,EAAtB;AACA,yBAAKlB,OAAL,CAAamB,YAAb,CAA0B,KAA1B,EAAiCC,IAAjC,CAAsClB,IAAtC;AACH;AACJ,aAVkD,CAUjDmB,IAViD,CAU5C,IAV4C,CAAnD;AAWH;AAhBI,KAPJ;;AA0BLC,UA1BK,oBA0BI;AACL;AACA,aAAKC,aAAL,GAAqB,KAAK1B,KAAL,CAAW2B,KAAhC;AACA,aAAKC,cAAL,GAAsB,KAAK5B,KAAL,CAAW6B,MAAjC;;AAEA,aAAK7B,KAAL,CAAW8B,OAAX,GAAqB,CAArB;AACA,aAAKhC,QAAL,CAAciC,MAAd,GAAuB,EAAvB;AACH,KAjCI;AAmCLR,QAnCK,gBAmCAlB,IAnCA,EAmCM;AACP,aAAKA,IAAL,GAAYA,IAAZ;;AAEA,aAAK2B,IAAL,CAAUC,CAAV,GAAc,CAAd;AACA,aAAKnC,QAAL,CAAciC,MAAd,GAAuB,KAAK1B,IAA5B;;AAEA,YAAI,KAAKP,QAAL,CAAckC,IAAd,CAAmBH,MAAnB,GAA4B,KAAKD,cAArC,EAAqD;AACjD,iBAAK5B,KAAL,CAAW6B,MAAX,GAAoB,KAAK/B,QAAL,CAAckC,IAAd,CAAmBH,MAAnB,GAA4B,EAAhD;AACH;;AAED,YAAIK,MAAMzC,GAAG0C,QAAH,CACN1C,GAAG2C,KAAH,CAAS3C,GAAG4C,MAAH,CAAU,IAAV,EAAgB5C,GAAG6C,EAAH,CAAM,CAAN,EAAS,GAAT,CAAhB,CAAT,EAAyC7C,GAAG8C,MAAH,CAAU,IAAV,CAAzC,CADM,EAEN9C,GAAG+C,SAAH,CAAa,IAAb,CAFM,EAGN/C,GAAG2C,KAAH,CAAS3C,GAAG4C,MAAH,CAAU,IAAV,EAAgB5C,GAAG6C,EAAH,CAAM,CAAN,EAAS,GAAT,CAAhB,CAAT,EAAyC7C,GAAGgD,OAAH,CAAW,IAAX,CAAzC,CAHM,EAINhD,GAAGiD,QAAH,CAAY,YAAY;AACpB,iBAAKV,IAAL,CAAUpB,OAAV;AACH,SAFW,CAEVY,IAFU,CAEL,IAFK,CAAZ,CAJM,CAAV;;AASA,aAAKxB,KAAL,CAAW2C,SAAX,CAAqBT,GAArB;AACH;AAvDI,CAAT","file":"Tip.js","sourceRoot":"../../../../../../assets/scripts/framework/common","sourcesContent":["/**\n * Created by skyxu on 2019/11/28.\n */\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        tipLabel: cc.Label,\n        tipBg: cc.Node\n    },\n\n    statics: {\n        tipNode: null,\n\n        // 显示Tip\n        show (text) {\n            cc.loader.loadRes('prefabs/common/Tip', cc.Prefab, function (err, prefab) {\n                if (!err) {\n                    if (cc.isValid(this.tipNode)) {\n                        this.tipNode.destroy();\n                    }\n                    this.tipNode = cc.instantiate(prefab);\n                    this.tipNode.zIndex = zy.constData.ZIndex.TIP;\n                    this.tipNode.parent = zy.director.getUiRoot();\n                    this.tipNode.getComponent('Tip').init(text);\n                }\n            }.bind(this))\n        },\n    },\n\n    onLoad() {\n        // 原始大小\n        this.originalWidth = this.tipBg.width;\n        this.originalHeight = this.tipBg.height;\n\n        this.tipBg.opacity = 0;\n        this.tipLabel.string = '';\n    },\n\n    init(text) {\n        this.text = text;\n\n        this.node.y = 0;\n        this.tipLabel.string = this.text;\n\n        if (this.tipLabel.node.height > this.originalHeight) {\n            this.tipBg.height = this.tipLabel.node.height + 50;\n        }\n\n        let seq = cc.sequence(\n            cc.spawn(cc.moveBy(0.25, cc.v2(0, 100)), cc.fadeIn(0.25)),\n            cc.delayTime(1.25),\n            cc.spawn(cc.moveBy(0.25, cc.v2(0, 100)), cc.fadeOut(0.25)),\n            cc.callFunc(function () {\n                this.node.destroy();\n            }.bind(this)),\n        );\n\n        this.tipBg.runAction(seq);\n    }\n\n});"]}