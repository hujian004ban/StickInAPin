{"version":3,"sources":["../../../../../../assets/scripts/framework/common/assets/scripts/framework/common/Alert.js"],"names":["cc","Class","extends","Component","statics","alertNode","show","params","loader","loadRes","err","pf","isValid","destroy","instantiate","zIndex","zy","constData","ZIndex","ALERT","parent","director","getUiRoot","getComponent","init","properties","okBtn","Node","cancleBtn","contentLabel","Label","text","okText","cancleText","okCb","cancleCb","string","active","getComponentInChildren","i18n","t","_forceUpdateRenderData","width","node","overflow","Overflow","SHRINK","height","horizontalAlign","HorizontalAlign","LEFT","confirmCallback","closeCallback","cancleCallback","clean"],"mappings":";;;;;;AAAA;;;;AAIAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,aAAS;AACLC,mBAAW,IADN;;AAGLC,YAHK,gBAGCC,MAHD,EAGS;AAAA;;AACVP,eAAGQ,MAAH,CAAUC,OAAV,CAAkB,sBAAlB,EAA0C,UAACC,GAAD,EAAMC,EAAN,EAAW;AACjD,oBAAI,CAACD,GAAL,EAAU;AACN,wBAAIV,GAAGY,OAAH,CAAW,MAAKP,SAAhB,CAAJ,EAAgC;AAC5B,8BAAKA,SAAL,CAAeQ,OAAf;AACH;AACD,0BAAKR,SAAL,GAAiBL,GAAGc,WAAH,CAAeH,EAAf,CAAjB;AACA,0BAAKN,SAAL,CAAeU,MAAf,GAAwBC,GAAGC,SAAH,CAAaC,MAAb,CAAoBC,KAA5C;AACA,0BAAKd,SAAL,CAAee,MAAf,GAAwBJ,GAAGK,QAAH,CAAYC,SAAZ,EAAxB;AACA,0BAAKjB,SAAL,CAAekB,YAAf,CAA4B,OAA5B,EAAqCC,IAArC,CAA0CjB,MAA1C;AACH;AACJ,aAVD;AAWH;AAfI,KAHJ;;AAqBLkB,gBAAY;AACRC,eAAO1B,GAAG2B,IADF;AAERC,mBAAW5B,GAAG2B,IAFN;AAGRE,sBAAc7B,GAAG8B;AAHT,KArBP;;AA2BLN,QA3BK,kBAiCF;AAAA,YANGjB,MAMH,uEANY;AACXwB,kBAAM,EADK;AAEXC,oBAAQ,EAFG;AAGXC,wBAAY,IAHD;AAIXC,kBAAM,IAJK;AAKXC,sBAAU;AALC,SAMZ;;AACC,aAAKN,YAAL,CAAkBO,MAAlB,GAA2B7B,OAAOwB,IAAlC;AACA,aAAKL,KAAL,CAAWW,MAAX,GAAoB,CAAC,CAAC9B,OAAOyB,MAA7B;AACA,aAAKN,KAAL,CAAWY,sBAAX,CAAkCtC,GAAG8B,KAArC,EAA4CM,MAA5C,GAAqD7B,OAAOyB,MAAP,GAAgBzB,OAAOyB,MAAvB,GAAgCO,KAAKC,CAAL,CAAO,QAAP,CAArF;AACA,aAAKZ,SAAL,CAAeS,MAAf,GAAwB,CAAC,CAAC9B,OAAO0B,UAAjC;AACA,aAAKL,SAAL,CAAeU,sBAAf,CAAsCtC,GAAG8B,KAAzC,EAAgDM,MAAhD,GAAyD7B,OAAO0B,UAAP,GAAoB1B,OAAO0B,UAA3B,GAAwCM,KAAKC,CAAL,CAAO,YAAP,CAAjG;;AAEA,aAAKN,IAAL,GAAY3B,OAAO2B,IAAnB;AACA,aAAKC,QAAL,GAAgB5B,OAAO4B,QAAvB;;AAEA,aAAKN,YAAL,CAAkBY,sBAAlB,CAAyC,IAAzC;AACA,YAAIC,QAAQ,KAAKb,YAAL,CAAkBc,IAAlB,CAAuBD,KAAnC;AACA,YAAIA,QAAQ,GAAZ,EAAiB;AACb,iBAAKb,YAAL,CAAkBe,QAAlB,GAA6B5C,GAAG8B,KAAH,CAASe,QAAT,CAAkBC,MAA/C;AACA,iBAAKjB,YAAL,CAAkBc,IAAlB,CAAuBD,KAAvB,GAA+B,GAA/B;AACA,iBAAKb,YAAL,CAAkBc,IAAlB,CAAuBI,MAAvB,GAAgC,GAAhC;AACA,iBAAKlB,YAAL,CAAkBmB,eAAlB,GAAoChD,GAAG8B,KAAH,CAASmB,eAAT,CAAyBC,IAA7D;AACH;AACJ,KAnDI;AAqDLC,mBArDK,6BAqDc;AACf,YAAI,KAAKjB,IAAT,EAAe;AACX,iBAAKA,IAAL;AACH;AACD,aAAKkB,aAAL;AACH,KA1DI;AA4DLC,kBA5DK,4BA4Da;AACd,YAAI,KAAKlB,QAAT,EAAmB;AACf,iBAAKA,QAAL;AACH;AACD,aAAKiB,aAAL;AACH,KAjEI;AAmELA,iBAnEK,2BAmEY;AACb,aAAKT,IAAL,CAAU9B,OAAV;AACH,KArEI;AAuELyC,SAvEK,mBAuEI;AACL,aAAKX,IAAL,CAAU9B,OAAV;AACH;AAzEI,CAAT","file":"Alert.js","sourceRoot":"../../../../../../assets/scripts/framework/common","sourcesContent":["/**\n * Created by skyxu on 2019/12/26.\n */\n\ncc.Class({\n    extends: cc.Component,\n\n    statics: {\n        alertNode: null,\n\n        show (params) {\n            cc.loader.loadRes(\"prefabs/common/Alert\", (err, pf)=>{\n                if (!err) {\n                    if (cc.isValid(this.alertNode)) {\n                        this.alertNode.destroy();\n                    }\n                    this.alertNode = cc.instantiate(pf);\n                    this.alertNode.zIndex = zy.constData.ZIndex.ALERT;\n                    this.alertNode.parent = zy.director.getUiRoot();\n                    this.alertNode.getComponent(\"Alert\").init(params);\n                }\n            })\n        }\n    },\n\n    properties: {\n        okBtn: cc.Node,\n        cancleBtn: cc.Node,\n        contentLabel: cc.Label,\n    },\n\n    init (params = {\n        text: \"\",\n        okText: \"\",\n        cancleText: null,\n        okCb: null,\n        cancleCb: null,\n    }) {\n        this.contentLabel.string = params.text;\n        this.okBtn.active = !!params.okText;\n        this.okBtn.getComponentInChildren(cc.Label).string = params.okText ? params.okText : i18n.t(\"btn_ok\");\n        this.cancleBtn.active = !!params.cancleText;\n        this.cancleBtn.getComponentInChildren(cc.Label).string = params.cancleText ? params.cancleText : i18n.t(\"btn_cancle\");\n\n        this.okCb = params.okCb;\n        this.cancleCb = params.cancleCb;\n\n        this.contentLabel._forceUpdateRenderData(true);\n        let width = this.contentLabel.node.width;\n        if (width > 400) {\n            this.contentLabel.overflow = cc.Label.Overflow.SHRINK;\n            this.contentLabel.node.width = 400;\n            this.contentLabel.node.height = 260;\n            this.contentLabel.horizontalAlign = cc.Label.HorizontalAlign.LEFT;\n        }\n    },\n\n    confirmCallback () {\n        if (this.okCb) {\n            this.okCb();\n        }\n        this.closeCallback();\n    },\n\n    cancleCallback () {\n        if (this.cancleCb) {\n            this.cancleCb();\n        }\n        this.closeCallback();\n    },\n\n    closeCallback () {\n        this.node.destroy();\n    },\n\n    clean () {\n        this.node.destroy();\n    }\n\n});"]}