{"version":3,"sources":["../../../../../../assets/scripts/framework/ui/assets/scripts/framework/ui/SwitchControl.js"],"names":["cc","Class","extends","Component","properties","_isOn","isOn","set","v","setIsOn","get","interactable","bgOnSp","Sprite","bgOffSp","barSp","switchEvents","default","type","EventHandler","ani","_updateState","posX","node","x","CC_EDITOR","stopAllActions","runAction","moveTo","v2","y","onLoad","on","Node","EventType","TOUCH_END","onClick","event","emitEvents","start"],"mappings":";;;;AAAA;;;;AAIA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,eAAO,IADC;AAERC,cAAM;AACFC,eADE,eACGC,CADH,EACM;AACJ,qBAAKC,OAAL,CAAaD,CAAb,EAAgB,IAAhB;AACH,aAHC;AAIFE,eAJE,iBAIK;AACH,uBAAO,KAAKL,KAAZ;AACH;AANC,SAFE;;AAWRM,sBAAc,IAXN;;AAaRC,gBAAQZ,GAAGa,MAbH;AAcRC,iBAASd,GAAGa,MAdJ;AAeRE,eAAOf,GAAGa,MAfF;;AAiBRG,sBAAc;AACVC,qBAAS,EADC;AAEVC,kBAAMlB,GAAGG,SAAH,CAAagB;AAFT;AAjBN,KAHP;;AA0BLV,WA1BK,mBA0BIH,IA1BJ,EA0BoB;AAAA,YAAVc,GAAU,uEAAN,IAAM;;AACrB,aAAKf,KAAL,GAAaC,IAAb;AACA,aAAKe,YAAL,CAAkBD,GAAlB;AACH,KA7BI;AA+BLC,gBA/BK,wBA+BSD,GA/BT,EA+Bc;AACf,YAAIE,OAAO,KAAKhB,IAAL,GAAY,KAAKQ,OAAL,CAAaS,IAAb,CAAkBC,CAA9B,GAAkC,KAAKZ,MAAL,CAAYW,IAAZ,CAAiBC,CAA9D;AACA,YAAIC,aAAa,CAACL,GAAlB,EAAuB;AACnB,iBAAKL,KAAL,CAAWQ,IAAX,CAAgBC,CAAhB,GAAoBF,IAApB;AACH,SAFD,MAEO;AACH,iBAAKP,KAAL,CAAWQ,IAAX,CAAgBG,cAAhB;AACA,iBAAKX,KAAL,CAAWQ,IAAX,CAAgBI,SAAhB,CAA0B3B,GAAG4B,MAAH,CAAU,GAAV,EAAe5B,GAAG6B,EAAH,CAAMP,IAAN,EAAY,KAAKP,KAAL,CAAWQ,IAAX,CAAgBO,CAA5B,CAAf,CAA1B;AACH;AACJ,KAvCI;AAyCLC,UAzCK,oBAyCK;AACN,aAAKR,IAAL,CAAUS,EAAV,CAAahC,GAAGiC,IAAH,CAAQC,SAAR,CAAkBC,SAA/B,EAA0C,KAAKC,OAA/C,EAAwD,IAAxD;AACH,KA3CI;AA6CLA,WA7CK,mBA6CIC,KA7CJ,EA6CW;AACZ,YAAI,CAAC,KAAK1B,YAAV,EAAuB;AACnB;AACH;AACD,aAAKL,IAAL,GAAY,CAAC,KAAKA,IAAlB;AACA,YAAI,KAAKU,YAAT,EAAsB;AAClBhB,eAAGG,SAAH,CAAagB,YAAb,CAA0BmB,UAA1B,CAAqC,KAAKtB,YAA1C,EAAwD,IAAxD;AACH;AACJ,KArDI;AAuDLuB,SAvDK,mBAuDI,CAER;AAzDI,CAAT","file":"SwitchControl.js","sourceRoot":"../../../../../../assets/scripts/framework/ui","sourcesContent":["/**\n * Created by skyxu on 2019/12/27.\n */\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        _isOn: true,\n        isOn: {\n            set (v) {\n                this.setIsOn(v, true);\n            },\n            get () {\n                return this._isOn;\n            }\n        },\n\n        interactable: true,\n\n        bgOnSp: cc.Sprite,\n        bgOffSp: cc.Sprite,\n        barSp: cc.Sprite,\n\n        switchEvents: {\n            default: [],\n            type: cc.Component.EventHandler\n        },\n    },\n\n    setIsOn (isOn, ani=true) {\n        this._isOn = isOn;\n        this._updateState(ani);\n    },\n\n    _updateState (ani) {\n        let posX = this.isOn ? this.bgOffSp.node.x : this.bgOnSp.node.x ;\n        if (CC_EDITOR || !ani) {\n            this.barSp.node.x = posX;\n        } else {\n            this.barSp.node.stopAllActions();\n            this.barSp.node.runAction(cc.moveTo(0.1, cc.v2(posX, this.barSp.node.y)));\n        }\n    },\n\n    onLoad () {\n        this.node.on(cc.Node.EventType.TOUCH_END, this.onClick, this);\n    },\n\n    onClick (event) {\n        if (!this.interactable){\n            return;\n        }\n        this.isOn = !this.isOn;\n        if (this.switchEvents){\n            cc.Component.EventHandler.emitEvents(this.switchEvents, this);\n        }\n    },\n\n    start () {\n\n    }\n});\n"]}